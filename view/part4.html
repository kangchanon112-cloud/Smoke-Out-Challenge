<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet" />
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <title>Part 4</title>
    <style>
        body {
            background-color: #fbdfc7;
            color: #333333;
            font-family: "Prompt", sans-serif;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            margin: 0;
            padding: 20px;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        #section1,
        #section2,
        #section3,
        #section4,
        #section5,
        #section6,
        #section7,
        #section8,
        #section9,
        #section10,
        #section11,
        #section12,
        #section13,
        #section14 {
            display: none !important;
            width: 100%;
            height: 100%;
            padding: 0 50px;
            /* ‡∏Å‡∏±‡∏ô‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            /* ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            align-items: center;
            /* ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            text-align: center;
        }

        /* ‡πÅ‡∏™‡∏î‡∏á section ‡∏ó‡∏µ‡πà active */
        #section1.active,
        #section2.active,
        #section3.active,
        #section4.active,
        #section5.active,
        #section6.active,
        #section7.active,
        #section8.active,
        #section9.active,
        #section10.active,
        #section11.active,
        #section12.active,
        #section13.active,
        #section14.active {
            display: flex !important;
        }


        .quote {
            max-width: 700px;
            /* ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
            margin: 0 auto;
            /* ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            line-height: 1.8;
            font-style: italic;
            color: #555555;
        }




        .arrow-text {
            display: inline-block;
            padding: 1.5rem 3rem;
            font-size: 1.5rem;
            color: #7c7c7c60;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s, transform 0.2s;
            border-radius: 0.5rem;
            user-select: none;
            cursor: pointer;
        }

        .arrow-text:hover {
            color: #555555a5;
            transform: scale(1.1);
        }

        .section {
            min-height: 100vh;
            /* ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
            width: 100%;
            padding: 20px;
            box-sizing: border-box;

            display: flex;
            flex-direction: column;
            justify-content: center;
            /* ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            align-items: center;
            /* ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            text-align: center;
        }



        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏• */
        #inputBox {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 10px;
            background: #ffe9c4;
            padding: 15px 20px;
            border-radius: 25px;
            border: 1px solid rgba(0, 0, 0, 0.266);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #message {
            width: 250px;
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            outline: none;
            background: #fef7e4c8;
        }

        #sendBtn {
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            background: #ffa813bb;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }

        #sendBtn:hover {
            background: #dd8a0c;
        }


        #stickers {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .sticker {
            font-size: 35px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .sticker:hover {
            transform: scale(1.2);
        }

        .floating {
            position: absolute;
            font-size: 2rem;
            animation: floatUp 3s ease-out forwards;
        }

        .center-expand {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.2);
            font-size: 2rem;
            opacity: 0;
            animation: expandCenter 0.6s ease-out forwards;
        }

        @keyframes expandCenter {
            0% {
                transform: translate(-50%, -50%) scale(0.2);
                opacity: 0;
            }

            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 1;
            }
        }

        #section1 {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            /* ‡∏ä‡∏¥‡∏î‡∏ö‡∏ô */
            align-items: center;
            height: 100vh;
            padding: 20px;

            box-sizing: border-box;
            position: relative;
        }




        .ma {
            position: absolute;
            bottom: 50px;
            left: 0;
            right: 0;
        }


        .word {
            opacity: 0;
            display: inline-block;
            transform: translateY(15px);
            animation: fadeUp 0.5s forwards;
        }

        @keyframes fadeUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ma5 {
            position: absolute;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }





        /* ‡∏Å‡∏£‡∏≠‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏• */
        #section4 {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #scoreCard {
            border-radius: 20px;
            background-color: #f8d7da77;
            /* default: ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏î‡∏µ */
            border: 1px solid #f5c2c277;
            padding: 30px 40px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            text-align: center;
            max-width: 500px;
            width: 90%;
            transition: background-color 0.3s, border-color 0.3s;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏° animation ‡πÄ‡∏•‡πá‡∏Å‡πÜ */
        }

        #totalScore {
            font-size: 3rem;
            font-weight: 700;

            margin-bottom: 15px;
        }

        #scoreLevel {
            font-size: 1.5rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 10px;
        }

        #scoreMessage {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
        }

        .boxed {
            border: 2px solid #6b4f3f;
            /* ‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö */
            border-radius: 10px;
            /* ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á */
            padding: 15px;
            /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏ö */
            background-color: #fff6ec23;
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≠‡∏ô‡πÜ */
            display: inline-block;
            /* ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏ö‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        }


        .bg {
            background-image: url('/public/img/part4/1.png');
            background-size: clamp(30px, 16vw, 120px);
            background-repeat: no-repeat;
            background-position: right 0% top 95%;
            /* ‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô % */
            width: 95vw;
            height: 95vh;
            margin: 0;
            padding: 0;
        }

        .bg2 {
            background-image: url('/public/img/part4/8.png'), url('/public/img/part4/3.png');
            background-size: clamp(100px, 30vw, 200px), clamp(400px, 60vw, 900px);
            background-repeat: no-repeat, no-repeat;
            background-position: right 48% top 3%, right 50% top 85%;
            /* ‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô % */
            width: 95vw;
            height: 95vh;
            margin: 0;
            padding: 0;
        }

        .bg3 {
            background-image: url('/public/img/part4/5.png'), url('/public/img/part4/4.png'), url('/public/img/part4/2.png');
            background-size: 8rem, 8rem, clamp(27rem, 50vw, 50rem);
            ;
            background-repeat: no-repeat, no-repeat, no-repeat;
            background-position: right 0% top 0%, left 0% top 100%, right 50% top 50%;
            /* ‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô % */
            width: 95vw;
            height: 95vh;
            margin: 0;
            padding: 0;
        }

        #section4 {
            display: flex;
            justify-content: center;
            /* ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô */
            align-items: center;
            /* ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            min-height: 100vh;
            /* ‡πÉ‡∏´‡πâ‡∏™‡∏π‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
            text-align: center;
        }

        #scoreImage {

            width: clamp(35rem, 100vw, 50rem);
            height: auto;
            display: block;
            margin: 15px auto;
        }


        .character {
            position: relative;
            display: inline-block;
        }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏°‡∏Ü */
        .speech-box {
            position: absolute;
            top: 34%;
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ */
            right: 32%;
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ */
            text-align: center;
            transform: translate(50%, -50%);
            /* ‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á */
        }


        .speech-box img {
            width: clamp(6rem, 12vw, 11rem);
            /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡πÄ‡∏°‡∏Ü */
        }

        .speech-box span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(10px, 2vw, 20px);
            ;
            font-weight: bold;
            color: #000;
            /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏µ‡πÄ‡∏°‡∏Ü */
            white-space: nowrap;
        }
    </style>

</head>

<body>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 -->
    <div class="text-center bg" id="section1">
        <div id="display"></div>

        <h2 class="mb-4 boxed">‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏™‡∏Ç‡∏≠‡∏á‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ ‡πÄ‡∏î‡πá‡∏Å‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ú‡∏•‡∏ó‡πç‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏•‡∏≠‡∏á‡πÑ‡∏´‡∏°?</h2>


        <div class="ma5">

            <div id="inputBox">
                <input type="text" id="message" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...">
                <button id="sendBtn">‡∏™‡πà‡∏á</button>
            </div>
        </div>
        <div class="ma">
            <a href="#" id="nextBtn1" class="arrow-text">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠</a>
        </div>
    </div>



    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 -->
    <div class=" text-center bg2" id="section2">
        <h2 id="quote2" class="fw-bold my-5 quote fs-3" style="color: #222222;">
            ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏Å‡πâ‡∏≤‡∏ß‡πÄ‡∏•‡πá‡∏Å‡πÜ
            ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏ô‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡πç‡∏≤‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏π‡πâ‡∏ï‡πà‡∏≠‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡πá‡∏à‡∏∞‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞
        </h2>

    </div>


    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 3 -->
    <div class=" text-center py-5 bg3" id="section3">
        <h2 class="fw-bold my-5 quote" style="color: #222222;">
            ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ
            ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
            ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£
        </h2>
        <div class="ma">
            <a href="#" id="nextBtn2" class="arrow-text">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠</a>
        </div>
    </div>

    <!-- 
    <div class="container text-center py-5" id="section4">
        <div id="scoreCard">
            <h2 class="fw-bold my-3 quote" style="color: #222222;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
            <img id="scoreImage" src="" alt="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" style="max-width:150px; margin:15px auto; display:block;">
            <h2 id="totalScore" class=" fw-bold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h2>
            <h3 id="scoreLevel" class="mt-3 fw-bold"></h3>
            <p id="scoreMessage" class= "mt-2 fs-5"></p>
        </div>
    </div> -->
    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4 -->
    <div class=" text-center py-5" id="section4">

        <div class="character">
            <img id="scoreImage" src="" alt="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
            <div class="speech-box">
                <img src="/public/img/part4/10.png" alt="">
                <span id="scoreBubble">0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</span>
            </div>
        </div>

    </div>


    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 4 -->
    <div class="container text-center py-5" id="section5">
        <h2 class="fw-bold my-5 quote" style="color: #222222;">
            ‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà‡πÑ‡∏î‡πâ
            ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡∏´‡∏≤‡∏ç‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà
            ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏à‡∏∞‡∏ó‡πç‡∏≤‡πÑ‡∏î‡πâ‡∏ô‡∏∞

        </h2>
    </div>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 5 -->
    <div class="container text-center py-5" id="section6">
        <h2 class="fw-bold my-5 quote" style="color: #222222;">
            "‡∏Ñ‡∏∏‡∏ì‡∏ó‡πç‡∏≤‡πÑ‡∏î‡πâ" "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πà‡∏á" "‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏±‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ"
            ‡∏Ñ‡πç‡∏≤‡∏û‡∏π‡∏î‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î
            ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Å‡πç‡∏≤‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
        </h2>
    </div>
    <div class="container text-center py-5" id="section7">
        <h2 class="fw-bold my-5 quote" style="color: #222222;">
            ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ú‡∏ä‡∏¥‡∏ç‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏°
            ‡∏Ç‡∏≠‡∏à‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
            ‡∏≠‡∏¢‡πà‡∏≤‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏±‡∏ß‡∏°‡∏≤‡∏ö‡∏±‡πà‡∏ô‡∏ó‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        </h2>
    </div>
    <div class="container text-center py-5" id="section8">
        <h2 class="fw-bold my-5 quote" style="color: #222222;">
            ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏î‡πÉ‡∏™‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô
            ‡πÅ‡∏ï‡πà‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏™‡∏°‡∏≠‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ ‡πÄ‡∏ä‡πâ‡∏≤
            ‡πÄ‡∏â‡∏Å‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏°‡∏≠
            ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ñ‡∏≠‡∏∞‡∏ô‡∏∞...‡πÄ‡∏ò‡∏≠‡∏ó‡πç‡∏≤‡πÑ‡∏î‡πâ
            ‡πÅ‡∏•‡∏∞‡πÄ‡∏ò‡∏≠‡∏à‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏±‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡∏î‡∏á‡∏≤‡∏°‡πÄ‡∏™‡∏°‡∏≠
        </h2>
    </div>
    <div class="container text-center py-5" id="section9">
        <h2 class="fw-bold my-5 quote" style="color: #222222;">
            ‡∏£‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á ‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡πç‡∏≤‡∏£‡πâ‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏±‡∏ô‡∏û‡∏¥‡∏©
        </h2>
    </div>

    <audio id="bgMusic" src="/public/img/part1/m2.mp3" loop></audio>
    <script>

        const music = document.getElementById("bgMusic");
        const time = localStorage.getItem("musicTime");
        window.addEventListener("load", () => {
            // ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á login redirect ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
            music.volume = 0.2; // üîâ ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏≤‡∏´‡∏ô‡πà‡∏≠‡∏¢
            if (time) {
                music.currentTime = time; // ‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°
            }
            music.play().catch(err => console.log(err));
        });
        document.getElementById('section1').classList.add('active');

        const nextBtn1 = document.getElementById('nextBtn1');
        function clearFloatingMessages() {
            const floatingMessages = document.querySelectorAll('body > div');
            floatingMessages.forEach(msg => {
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ class ‡∏´‡∏£‡∏∑‡∏≠ style ‡∏Ç‡∏≠‡∏á floating message
                if (msg.style && (msg.style.position === 'absolute' || msg.classList.contains('center-expand'))) {
                    msg.remove();
                }
            });
        }

        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î nextBtn1
        nextBtn1.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('section1').classList.remove('active');
            document.getElementById('section2').classList.add('active');
            clearFloatingMessages(); // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏≠‡∏¢
        });

        document.getElementById('nextBtn2').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('section3').classList.remove('active');
            localStorage.setItem("musicTime", music.currentTime);
            window.location.href = "quiz4";
        });



        document.body.addEventListener('click', function (e) {
            const activeSectionIds = [
                'section1', 'section2', 'section3', 'section4', 'section5', 'section6', 'section7', 'section8', 'section9'

            ];

            let currentIndex = activeSectionIds.findIndex(id => document.getElementById(id).classList.contains('active'));
            if (currentIndex === -1) return;

            // ‡∏´‡πâ‡∏≤‡∏°‡∏Ç‡πâ‡∏≤‡∏° section3 ‡πÅ‡∏•‡∏∞ section12
            const currentSectionId = activeSectionIds[currentIndex];
            if (currentSectionId === 'section1' || currentSectionId === 'section3' || currentSectionId === 'section9') {
                return;
            }

            // ‡∏õ‡∏¥‡∏î section ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            document.getElementById(currentSectionId).classList.remove('active');

            // ‡πÄ‡∏õ‡∏¥‡∏î section ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            if (currentIndex + 1 < activeSectionIds.length) {
                document.getElementById(activeSectionIds[currentIndex + 1]).classList.add('active');
            }
        });


        function typeEffect(elementId, speed = 100) {
            const el = document.getElementById(elementId);
            const text = el.innerText.trim();
            el.innerText = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤

            let i = 0;
            const timer = setInterval(() => {
                el.innerText += text[i];
                i++;
                if (i >= text.length) {
                    clearInterval(timer);
                }
            }, speed);
        }

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠ section2 ‡πÅ‡∏™‡∏î‡∏á
        document.getElementById("nextBtn1").addEventListener("click", () => {
            setTimeout(() => {
                typeEffect("quote2", 50); // 50ms ‡∏ï‡πà‡∏≠ ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
            }, 200);
        });




        function openSectionFromHash() {
            const hash = window.location.hash.replace('#', '');
            if (hash) {
                const allSections = document.querySelectorAll(
                    ' #section1, #section4, #section5'
                );
                allSections.forEach(sec => sec.classList.remove('active'));

                const targetSection = document.getElementById(hash);
                if (targetSection) {
                    targetSection.classList.add('active');
                }
            }
        }



        openSectionFromHash();


        const socket = io();

        const messageInput = document.getElementById('message');
        const sendBtn = document.getElementById('sendBtn');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏≠‡∏¢
        function showFloatingMessage(msg) {
            const el = document.createElement('div');
            el.textContent = msg;
            el.style.position = 'absolute';


            const randomX = Math.random() * (window.innerWidth - 250);
            const randomY = Math.random() * (window.innerHeight - 50);

            el.style.left = randomX + 'px';
            el.style.top = randomY + 'px';

            el.style.color = '#333'; // ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°
            el.style.background = '#e6dccf'; // ‡∏Ñ‡∏£‡∏µ‡∏°‡∏≠‡πà‡∏≠‡∏ô
            el.style.border = '1px solid #e0d8c3'; // ‡∏Ç‡∏≠‡∏ö‡∏≠‡πà‡∏≠‡∏ô
            el.style.fontSize = '1.5rem';
            el.style.fontWeight = '600';
            el.style.padding = '12px 20px';
            el.style.borderRadius = '25px';
            el.style.boxShadow = '0 8px 20px rgba(0,0,0,0.25)';
            el.style.transform = 'scale(0.2) rotate(-15deg)';
            el.style.opacity = '0';
            el.style.textShadow = '1px 2px 6px rgba(0,0,0,0.3)';
            el.style.transition = 'transform 0.5s cubic-bezier(0.34,1.56,0.64,1), opacity 0.4s ease-out';

            document.body.appendChild(el);

            requestAnimationFrame(() => {
                el.style.transform = 'scale(1) rotate(0deg)';
                el.style.opacity = '1';
            });
        }

        // ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å server ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô
        socket.on('receiveSticker', (msg) => {
            showFloatingMessage(msg);
        });

        // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        function handleSend() {
            const text = messageInput.value.trim();
            if (!text) return;
            socket.emit('sendSticker', text); // ‡∏™‡πà‡∏á‡πÑ‡∏õ server
            messageInput.value = '';
        }

        sendBtn.addEventListener('click', handleSend);
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') handleSend();
        });


        const totalScoreEl = document.getElementById("totalScore");
        const userID = localStorage.getItem("userID");
        const scoreImage = document.getElementById("scoreImage");
        const scoreBubbleEl = document.getElementById("scoreBubble");

        if (scoreBubbleEl && totalScoreEl) {
            scoreBubbleEl.textContent = totalScoreEl.textContent + " ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô";
        }



        if (!userID) {
            alert('login')
        } else {
            fetch(`/totalScore/${userID}`)
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        const score = data.totalScore;
                        // ‚úÖ ‡πÉ‡∏™‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡∏á HTML
                        if (totalScoreEl) totalScoreEl.textContent = score;
                        if (scoreBubbleEl) scoreBubbleEl.textContent = score + " ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô";
                        if (score < 12) {
                            scoreImage.src = "/public/img/part4/11.png";
                        } else if (score < 14) {
                            scoreImage.src = "/public/img/part4/12.png";
                        } else if (score < 16) {
                            scoreImage.src = "/public/img/part4/13.png";
                        } else {
                            scoreImage.src = "/public/img/part4/14.png";
                        }

                    }
                })
                .catch(err => {
                    console.error(err);
                });
        }


    </script>

</body>

</html>